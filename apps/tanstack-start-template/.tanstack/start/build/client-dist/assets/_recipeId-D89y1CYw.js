import{v as de,w as U,x as g,y as T,z as C,A as N,B as _,C as $,E as pe,F as fe,G as ge,H as B,I as G,r as n,J as ve,K as me,j as a,u as ye,M as E,N as xe,e as Re,P as be,t as De}from"./main-PzUuNzoA.js";import{u as K,c as Ce,d as Y,B as Ae}from"./button-CX__d95m.js";import{j as q,h as Oe,R as Se,T as je,W as we,c as Ee,g as Te,b as Ne,i as _e,C as J,f as Pe,O as Ie}from"./index-D7IHsiKy.js";import{c as b}from"./utils-DEz_iieQ.js";import{c as Qe}from"./createLucideIcon-CNDy2lND.js";import"./index-Bcp2qJ53.js";var Me=class extends de{constructor(e,t){super(),this.options=t,this.#s=e,this.#a=null,this.#r=U(),this.options.experimental_prefetchInRender||this.#r.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}#s;#e=void 0;#f=void 0;#t=void 0;#o;#h;#r;#a;#g;#u;#d;#n;#l;#i;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),z(this.#e,this.options)?this.#c():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return P(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return P(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#R(),this.#b(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,s=this.#e;if(this.options=this.#s.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof g(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#D(),this.#e.setOptions(this.options),t._defaulted&&!T(this.options,t)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const r=this.hasListeners();r&&H(this.#e,s,this.options,t)&&this.#c(),this.updateResult(),r&&(this.#e!==s||g(this.options.enabled,this.#e)!==g(t.enabled,this.#e)||C(this.options.staleTime,this.#e)!==C(t.staleTime,this.#e))&&this.#v();const i=this.#m();r&&(this.#e!==s||g(this.options.enabled,this.#e)!==g(t.enabled,this.#e)||i!==this.#i)&&this.#y(i)}getOptimisticResult(e){const t=this.#s.getQueryCache().build(this.#s,e),s=this.createResult(t,e);return ke(this,s)&&(this.#t=s,this.#h=this.options,this.#o=this.#e.state),s}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(s,r)=>(this.trackProp(r),t?.(r),Reflect.get(s,r))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#s.defaultQueryOptions(e),s=this.#s.getQueryCache().build(this.#s,t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return this.#c({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#c(e){this.#D();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(N)),t}#v(){this.#R();const e=C(this.options.staleTime,this.#e);if(_||this.#t.isStale||!$(e))return;const s=pe(this.#t.dataUpdatedAt,e)+1;this.#n=setTimeout(()=>{this.#t.isStale||this.updateResult()},s)}#m(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#y(e){this.#b(),this.#i=e,!(_||g(this.options.enabled,this.#e)===!1||!$(this.#i)||this.#i===0)&&(this.#l=setInterval(()=>{(this.options.refetchIntervalInBackground||fe.isFocused())&&this.#c()},this.#i))}#x(){this.#v(),this.#y(this.#m())}#R(){this.#n&&(clearTimeout(this.#n),this.#n=void 0)}#b(){this.#l&&(clearInterval(this.#l),this.#l=void 0)}createResult(e,t){const s=this.#e,r=this.options,i=this.#t,h=this.#o,o=this.#h,l=e!==s?e.state:this.#f,{state:u}=e;let c={...u},D=!1,d;if(t._optimisticResults){const p=this.hasListeners(),A=!p&&z(e,t),x=p&&H(e,s,t,r);(A||x)&&(c={...c,...ge(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(c.fetchStatus="idle")}let{error:Q,errorUpdatedAt:M,status:y}=c;d=c.data;let F=!1;if(t.placeholderData!==void 0&&d===void 0&&y==="pending"){let p;i?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(p=i.data,F=!0):p=typeof t.placeholderData=="function"?t.placeholderData(this.#d?.state.data,this.#d):t.placeholderData,p!==void 0&&(y="success",d=B(i?.data,p,t),D=!0)}if(t.select&&d!==void 0&&!F)if(i&&d===h?.data&&t.select===this.#g)d=this.#u;else try{this.#g=t.select,d=t.select(d),d=B(i?.data,d,t),this.#u=d,this.#a=null}catch(p){this.#a=p}this.#a&&(Q=this.#a,d=this.#u,M=Date.now(),y="error");const S=c.fetchStatus==="fetching",j=y==="pending",w=y==="error",k=j&&S,L=d!==void 0,f={status:y,fetchStatus:c.fetchStatus,isPending:j,isSuccess:y==="success",isError:w,isInitialLoading:k,isLoading:k,data:d,dataUpdatedAt:c.dataUpdatedAt,error:Q,errorUpdatedAt:M,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>l.dataUpdateCount||c.errorUpdateCount>l.errorUpdateCount,isFetching:S,isRefetching:S&&!j,isLoadingError:w&&!L,isPaused:c.fetchStatus==="paused",isPlaceholderData:D,isRefetchError:w&&L,isStale:I(e,t),refetch:this.refetch,promise:this.#r};if(this.options.experimental_prefetchInRender){const p=O=>{f.status==="error"?O.reject(f.error):f.data!==void 0&&O.resolve(f.data)},A=()=>{const O=this.#r=f.promise=U();p(O)},x=this.#r;switch(x.status){case"pending":e.queryHash===s.queryHash&&p(x);break;case"fulfilled":(f.status==="error"||f.data!==x.value)&&A();break;case"rejected":(f.status!=="error"||f.error!==x.reason)&&A();break}}return f}updateResult(){const e=this.#t,t=this.createResult(this.#e,this.options);if(this.#o=this.#e.state,this.#h=this.options,this.#o.data!==void 0&&(this.#d=this.#e),T(t,e))return;this.#t=t;const s=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,i=typeof r=="function"?r():r;if(i==="all"||!i&&!this.#p.size)return!0;const h=new Set(i??this.#p);return this.options.throwOnError&&h.add("error"),Object.keys(this.#t).some(o=>{const m=o;return this.#t[m]!==e[m]&&h.has(m)})};this.#C({listeners:s()})}#D(){const e=this.#s.getQueryCache().build(this.#s,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#f=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#C(e){G.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#t)}),this.#s.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function Fe(e,t){return g(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function z(e,t){return Fe(e,t)||e.state.data!==void 0&&P(e,t,t.refetchOnMount)}function P(e,t,s){if(g(t.enabled,e)!==!1&&C(t.staleTime,e)!=="static"){const r=typeof s=="function"?s(e):s;return r==="always"||r!==!1&&I(e,t)}return!1}function H(e,t,s,r){return(e!==t||g(r.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&I(e,s)}function I(e,t){return g(t.enabled,e)!==!1&&e.isStaleByTime(C(t.staleTime,e))}function ke(e,t){return!T(e.getCurrentResult(),t)}var X=n.createContext(!1),Le=()=>n.useContext(X);X.Provider;function Ue(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var $e=n.createContext(Ue()),Be=()=>n.useContext($e),ze=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},He=e=>{n.useEffect(()=>{e.clearReset()},[e])},Ve=({result:e,errorResetBoundary:t,throwOnError:s,query:r,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(i&&e.data===void 0||ve(s,[e.error,r])),We=(e,t)=>t.state.data===void 0,Ge=e=>{if(e.suspense){const t=r=>r==="static"?r:Math.max(r??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...r)=>t(s(...r)):t(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Ke=(e,t)=>e.isLoading&&e.isFetching&&!t,Ye=(e,t)=>e?.suspense&&t.isPending,V=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function qe(e,t,s){const r=Le(),i=Be(),h=me(),o=h.defaultQueryOptions(e);h.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=r?"isRestoring":"optimistic",Ge(o),ze(o,i),He(i);const m=!h.getQueryCache().get(o.queryHash),[l]=n.useState(()=>new t(h,o)),u=l.getOptimisticResult(o),c=!r&&e.subscribed!==!1;if(n.useSyncExternalStore(n.useCallback(D=>{const d=c?l.subscribe(G.batchCalls(D)):N;return l.updateResult(),d},[l,c]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),n.useEffect(()=>{l.setOptions(o)},[o,l]),Ye(o,u))throw V(o,l,i);if(Ve({result:u,errorResetBoundary:i,throwOnError:o.throwOnError,query:h.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;return h.getDefaultOptions().queries?._experimental_afterQuery?.(o,u),o.experimental_prefetchInRender&&!_&&Ke(u,r)&&(m?V(o,l,i):h.getQueryCache().get(o.queryHash)?.promise)?.catch(N).finally(()=>{l.updateResult()}),o.notifyOnChangeProps?u:l.trackResult(u)}function Je(e,t){return qe({...e,enabled:!0,suspense:!0,throwOnError:We,placeholderData:void 0},Me)}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ze=Qe("trash-2",Xe);var Z="AlertDialog",[et,It]=Ee(Z,[q]),v=q(),ee=e=>{const{__scopeAlertDialog:t,...s}=e,r=v(t);return a.jsx(Se,{...r,...s,modal:!0})};ee.displayName=Z;var tt="AlertDialogTrigger",te=n.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...r}=e,i=v(s);return a.jsx(je,{...i,...r,ref:t})});te.displayName=tt;var st="AlertDialogPortal",se=e=>{const{__scopeAlertDialog:t,...s}=e,r=v(t);return a.jsx(Pe,{...r,...s})};se.displayName=st;var rt="AlertDialogOverlay",re=n.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...r}=e,i=v(s);return a.jsx(Ie,{...i,...r,ref:t})});re.displayName=rt;var R="AlertDialogContent",[at,it]=et(R),ot=Ce("AlertDialogContent"),ae=n.forwardRef((e,t)=>{const{__scopeAlertDialog:s,children:r,...i}=e,h=v(s),o=n.useRef(null),m=K(t,o),l=n.useRef(null);return a.jsx(we,{contentName:R,titleName:ie,docsSlug:"alert-dialog",children:a.jsx(at,{scope:s,cancelRef:l,children:a.jsxs(Te,{role:"alertdialog",...h,...i,ref:m,onOpenAutoFocus:Ne(i.onOpenAutoFocus,u=>{u.preventDefault(),l.current?.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(ot,{children:r}),a.jsx(lt,{contentRef:o})]})})})});ae.displayName=R;var ie="AlertDialogTitle",oe=n.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...r}=e,i=v(s);return a.jsx(Oe,{...i,...r,ref:t})});oe.displayName=ie;var ne="AlertDialogDescription",le=n.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...r}=e,i=v(s);return a.jsx(_e,{...i,...r,ref:t})});le.displayName=ne;var nt="AlertDialogAction",ce=n.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...r}=e,i=v(s);return a.jsx(J,{...i,...r,ref:t})});ce.displayName=nt;var he="AlertDialogCancel",ue=n.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...r}=e,{cancelRef:i}=it(he,s),h=v(s),o=K(t,i);return a.jsx(J,{...h,...r,ref:o})});ue.displayName=he;var lt=({contentRef:e})=>{const t=`\`${R}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${R}\` by passing a \`${ne}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${R}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return n.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},ct=ee,ht=te,ut=se,dt=re,pt=ae,ft=ce,gt=ue,vt=le;function mt({...e}){return a.jsx(ct,{"data-slot":"alert-dialog",...e})}function yt({...e}){return a.jsx(ht,{"data-slot":"alert-dialog-trigger",...e})}function xt({...e}){return a.jsx(ut,{"data-slot":"alert-dialog-portal",...e})}function Rt({className:e,...t}){return a.jsx(dt,{"data-slot":"alert-dialog-overlay",className:b("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",e),...t})}function bt({className:e,...t}){return a.jsxs(xt,{children:[a.jsx(Rt,{}),a.jsx(pt,{"data-slot":"alert-dialog-content",className:b("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border border-slate-200 bg-white p-6 shadow-lg duration-200 sm:max-w-lg dark:border-slate-800 dark:bg-slate-950",e),...t})]})}function Dt({className:e,...t}){return a.jsx("div",{"data-slot":"alert-dialog-footer",className:b("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Ct({className:e,...t}){return a.jsx(vt,{"data-slot":"alert-dialog-description",className:b("text-sm text-slate-500 dark:text-slate-400",e),...t})}function At({className:e,...t}){return a.jsx(ft,{className:b(Y(),e),...t})}function Ot({className:e,...t}){return a.jsx(gt,{className:b(Y({variant:"outline"}),e),...t})}const{logger:W}=Re();function St(){const e=ye(),t=E.useNavigate(),{recipeId:s}=E.useParams(),{queryClient:r}=E.useRouteContext(),i=Je(xe(s)),h=async()=>{W.info("Query client",r);try{await be({data:s}),t({to:"/recipe"}),e.invalidate()}catch(o){W.warn("Failed to delete recipe",o),De.error("Failed to delete recipe")}};return a.jsxs("div",{className:"flex",children:[a.jsxs("div",{className:"flex grow flex-col gap-4",children:[a.jsx("h4",{className:"text-xl font-bold",children:i.data.title}),a.jsx("div",{className:"text-sm whitespace-pre-line",children:i.data.content})]}),a.jsxs(mt,{children:[a.jsx(yt,{asChild:!0,children:a.jsxs(Ae,{variant:"destructive",size:"lg",className:"fixed right-5 bottom-5 z-40 items-center gap-1 sm:static",children:[a.jsx("span",{className:"hidden sm:block",children:"Delete"}),a.jsx(Ze,{})]})}),a.jsxs(bt,{children:[a.jsx(oe,{children:"Do you want to delete this recipe?"}),a.jsx(Ct,{children:"The recipe will be deleted permanently."}),a.jsxs(Dt,{children:[a.jsx(Ot,{children:"Cancel"}),a.jsx(At,{onClick:h,children:"Delete"})]})]})]})]})}const Qt=function(){return a.jsx("div",{className:"space-y-2",children:a.jsx(n.Suspense,{fallback:a.jsx("div",{children:"Loading..."}),children:a.jsx(St,{})})})};export{Qt as component};
